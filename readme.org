#+title: Project Gutenblog
#+date: February 15, 2022
#+options: toc:nil

I want to build a website generator, but first I need a markup
language. I like org-mode and markdown but they each have enough
quirks that I don't want to use them for this project.

For Gutenblog v1.0 I chose to use raw, unaltered HTML. This was the
simplest to implement and offered the most flexibility for publishing
web pages. However, I think a plain-text markup language would be more
ergonomic long-term and the semantic web is a lie anyway.

Reasons why I am creating my own markup language:
1. Org-mode is too verbose to write without help from ~emacs~.
2. Markdown is too abstract and poorly defined.

Because markdown is such a popular and familiar format, I'm not going
to deviate from it all that much. Instead I'm going to incorporate a
few Haml inspired directives for handling blocks and use slashes
instead of asterisks for italics.

* GML Grammar (BNF)
#+begin_example
<document> ::= <block> <eof>
             | <block> <block>

<block> ::= <heading> <text> <eol>
          | <paragraph> <empty-line>
          | "%title" <space> <text> <eol>
          | "%subtitle" <space> <text> <eol>
          | "%date" <space> <text> <eol>
          | "%blockquote" <eol> <paragraph> <empty-line>
          | "%footnotes" <eol> <paragraph> <empty-line>
          | "%figure" <space> <href> <eol> <html> <eol> <caption> <empty-line>
          | "%pre" <eol> <text> <empty-line>
          | "%html" <eol> <text> <empty-line>

<paragraph> ::= <styled-text>
              | <styled-text> <url>
              | <url> <styled-text>
              | <ul> <footnote> <styled-text>
              | <ol> <footnote> <styled-text>
              | <paragraph> <paragraph>

<styled-text> ::= <style> <eol>
                | <text> <eol>
                | <style> <styled-text>
                | <text> <styled-text>

<heading> ::= "*"
            | "**"
            | "***"

<ul> ::= - <space> <text> <eol>
<ol> ::= <number> "." <space> <text> <eol>
<html> ::= "<img>"
         | "<audio>"
         | "<video>"

<href> ::= ""
         | <text>

<caption> ::= ""
            | <text>

<footnote> ::= ""
             | "[" <number> "]"

<style> ::= "/" <text> "/"
          | "*" <text> "*"
          | "`" <text> "`"

<url> ::= "[" <text> "]" (" <text> ")"
#+end_example

* Examples
GML Example:
#+begin_example
%title The Gutenblog Markup Language (GML)
%date 2022-02-15

This is /my/ *markup language* called ~GML~.

Did you know that [my favorite website](https://example.com) is just an example?
- Foo[1]
- Bar[2]

%pre
func main() {
    fmt.Println("Hello Gutenblog")
}

%blockquote
This is such a great quote.

%figure href="examples/saturn.jpg"
<img alt="example image" src="examples/saturn-300x300.jpg" />
Example caption

%figure
<audio controls src="examples/t-rex-roar.mp3"></audio>
Listen to the T-Rex

%html
<details>
  <summary>Details</summary>
    Something small enough to escape casual notice.
</details>

%footnotes
- [1] Foo
- [2] Bar
#+end_example

Output as HTML:
#+begin_src html
<article>
  <header>
    <h1>The Gutenblog Markup Language (GML)</h1>
    <time datetime="2022-02-15">February 15, 2022</time>
  </header>

  <p>
    This is <em>my</em> <strong>markup language</strong> called <code>GML</code>.
  </p>

  <p>
    Did you know that <a href="https://example.com">my favorite website</a> is just an example?
  </p>

  <ul>
    <li>Foo<a id="fnr.1" href="#fn.1"><sup>[1]</sup></a></li>
    <li>Bar<a id="fnr.2" href="#fn.2"><sup>[2]</sup></a></li>
  </ul>

  <pre>
func main() {
    fmt.Println("Hello Gutenblog")
}
  </pre>

  <blockquote>
    This is such a great quote.
  </blockquote>

  <figure>
    <a href="examples/saturn.jpg">
      <img alt="example image" src="examples/saturn-300x300.jpg" />
    </a>
    <figcaption>Example caption</figcaption>
  </figure>

  <figure>
    <audio controls src="examples/t-rex-roar.mp3"></audio>
    <figcaption>Listen to the T-Rex</figcaption>
  </figure>

  <details>
    <summary>Details</summary>
      Something small enough to escape casual notice.
  </details>

  <footer>
    <ol>
      <li>Something about Foo. <a class="gml-fnback" href="#fnr.1">⮐</a></li>
      <li>Something about Bar. <a class="gml-fnback" href="#fnr.2">⮐</a></li>
    </ol>
  </footer>
</article>
#+end_src
